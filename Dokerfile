FROM openjdk:21-jdk-slim
COPY --from=builder build/libs/*.jar techmail-0.0.1-SNAPSHOT.jar

# profile 설정
ARG PROFILE
ARG PORT
ENV SPRING_PROFILES_ACTIVE=${PROFILE}

# 컨테이너에서 jar 파일 실행
EXPOSE $PORT
ENTRYPOINT ["java", "-jar", "/techmail-0.0.1-SNAPSHOT.jar"]